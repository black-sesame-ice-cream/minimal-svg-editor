<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal SVG Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black flex flex-col">

    <div class="flex flex-col md:flex-row flex-grow h-full">
        
        <!-- 左側: プレビューエリア -->
        <div id="preview-container" class="shadow-lg flex flex-col transition-colors duration-150 flex-1 overflow-hidden" style="flex-basis: 50%; min-height: 200px; min-width: 200px;">
            <div class="flex flex-col h-full">
                <!-- プレビュー コントロールバー -->
                <div id="preview-control-bar" class="flex items-center justify-start flex-wrap gap-3 gap-y-2 p-2 rounded-md transition-colors duration-150">
                    <!-- プレビュー背景色 -->
                    <div class="flex items-center space-x-2">
                        <label for="preview-bg-color-picker" id="preview-bg-label" class="text-gray-600 text-sm font-medium">背景</label>
                        <input type="color" id="preview-bg-color-picker" title="プレビュー背景色を選択" value="#111827">
                    </div>
                    <!-- 補助線カラーピッカー -->
                    <div class="flex items-center space-x-2">
                        <label for="grid-color-picker" id="grid-color-label" class="text-gray-600 text-sm font-medium">線色</label>
                        <input type="color" id="grid-color-picker" title="補助線と枠線の色を選択" value="#eeeeee">
                    </div>
                    <!-- 補助線コントロール -->
                    <div class="flex items-center space-x-2">
                        <label for="grid-cols-input" class="text-gray-600 text-sm font-medium">横分割</label>
                        <input type="number" id="grid-cols-input" min="1" max="32" value="2"
                               class="w-14 preview-input preview-input-light"
                               title="横の分割数 (1-32)">
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="grid-rows-input" class="text-gray-600 text-sm font-medium">縦分割</label>
                        <input type="number" id="grid-rows-input" min="1" max="32" value="2"
                               class="w-14 preview-input preview-input-light"
                               title="縦の分割数 (1-32)">
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="grid-z-select" class="text-gray-600 text-sm font-medium">線</label>
                        <select id="grid-z-select" class="preview-input preview-input-light" title="補助線の前後">
                            <option value="back">背面</option>
                            <option value="front">前面</option>
                        </select>
                    </div>

                    <!-- (変更) 座標表示エリアをチェックボックスから数値入力に変更 -->
                    <div class="flex items-center space-x-2">
                        <label for="coords-decimal-places-input" id="show-coords-label" class="text-gray-600 text-sm font-medium">カーソル座標</label>
                        <input type="number" id="coords-decimal-places-input" min="-1" max="15" value="0"
                               class="w-14 preview-input preview-input-light"
                               title="カーソル座標の小数点以下の桁数 (-1でオフ, 0-15)">
                    </div>

                    <!-- ズームコントロール (非表示) -->
                    <div class="flex items-center space-x-2 hidden">
                        <label id="preview-zoom-label" class="text-gray-600 text-sm font-medium">ズーム</label>
                        <button id="zoom-out-btn" type="button" class="zoom-btn px-2 py-0.5 rounded-md text-lg font-bold preview-input preview-input-light" title="縮小">-</button>
                        <button id="zoom-reset-btn" type="button" class="zoom-btn px-2 py-0.5 rounded-md text-sm preview-input preview-input-light" title="リセット">100%</button>
                        <button id="zoom-in-btn" type="button" class="zoom-btn px-2 py-0.5 rounded-md text-lg font-bold preview-input preview-input-light" title="拡大">+</button>
                    </div>
                </div>
                
                <!-- プレビュー本体 flex-grow を追加し、高さを確保 -->
                <div id="preview" class="w-full h-full p-2 transition-colors duration-150 flex-grow">
                    <!-- パン・ズーム用のコンテナ (transform-origin: 0 0) -->
                    <div id="svg-container" style="width: 100%; height: 100%; transform-origin: 0 0;">
                        <!-- ユーザーSVG専用のラッパーを追加 -->
                        <div id="user-svg-wrapper" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                            <!-- ここにSVGがレンダリングされます -->
                        </div>
                        <!-- gridSvg は JS によってここに追加されます -->
                    </div>
                </div>
            </div>
        </div>

        <!-- リサイズバー -->
        <div id="resizer"></div>

        <!-- 右側: エディタエリア -->
        <div id="editor-container" class="shadow-lg flex flex-col transition-colors duration-150 flex-1 overflow-hidden" style="flex-basis: 50%; min-height: 200px; min-width: 200px;">
            <div class="flex flex-col h-full">
                <!-- コントロールバー -->
                <div id="control-bar" class="flex items-center justify-start flex-wrap gap-3 gap-y-2 p-2 rounded-md transition-colors duration-150">
                    
                    <!-- 背景色 -->
                    <div class="flex items-center space-x-2">
                        <label for="bg-color-picker" class="text-gray-300 text-sm font-medium">背景</label>
                        <input type="color" id="bg-color-picker" title="背景色を選択" value="#111827">
                    </div>
                    <!-- 文字色 -->
                    <div class="flex items-center space-x-2">
                        <label for="text-color-picker" class="text-gray-300 text-sm font-medium">文字</label>
                        <input type="color" id="text-color-picker" title="文字色を選択" value="#bcbcbc">
                    </div>
                    <!-- 文字サイズ -->
                    <div class="flex items-center space-x-2">
                        <label for="font-size-input" class="text-gray-300 text-sm font-medium">サイズ</label>
                        <input type="number" id="font-size-input" min="8" max="64" value="14"
                               class="w-14 preview-input preview-input-light"
                               title="フォントサイズ (8-64)">
                    </div>
                    <!-- SVG読み込みボタン -->
                    <div class="flex items-center">
                        <input type="file" id="svg-file-input" accept="image/svg+xml,.svg" class="hidden">
                        <button id="load-svg-button" type="button"
                                class="px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors">
                            SVGを開く
                        </button>
                    </div>
                    <!-- 小数点桁数入力 -->
                    <div class="flex items-center space-x-2">
                        <label for="decimal-places-input" class="text-gray-300 text-sm font-medium">小数点</label>
                        <input type="number" id="decimal-places-input" min="-1" max="16" value="2"
                               class="w-14 preview-input preview-input-light" title="最小化時の小数点以下の桁数 (-1で無効, 0-16)">
                    </div>
                    <!-- 最小化チェックボックス -->
                    <div class="flex items-center space-x-2">
                        <label for="minimize-svg-checkbox" class="text-gray-300 text-sm font-medium">最小化</label>
                        <input type="checkbox" id="minimize-svg-checkbox" class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2"
                                title="破壊的な場合あり">
                    </div>
                    <!-- SVG保存ボタン -->
                    <div class="flex items-center">
                        <button id="save-svg-button" type="button"
                                class="px-3 py-1 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors">
                            SVGを保存
                        </button>
                    </div>
                </div>
                
                <!-- テキストエリア -->
                <textarea id="svg-editor" 
                          class="w-full h-full p-4 leading-relaxed flex-grow" 
                          spellcheck="false">
<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">

<defs>
	<linearGradient id="myGradient" x1="0%" y1="0%" x2="100%" y2="0%">
		<stop offset="0%" stop-color="#ff0000"/> 
		<stop offset="100%" stop-color="#ffff00"/> 
	</linearGradient>

	<pattern id="myPattern" width="20" height="20" patternUnits="userSpaceOnUse">
		<circle cx="10" cy="10" r="5" fill="url(#myGradient)"/>
	</pattern>  
</defs>

<polygon points="50.12345,5.6789 61,40 98,40 68,62 79,96 50,75 21,96 32,62 2,40 39,40"
	fill="url(#myPattern)" stroke="#ff0" stroke-width="1.0" />

</svg></textarea>

            </div>
        </div>
    </div>

    <a href="https://github.com/black-sesame-ice-cream/minimal-svg-editor" target="_blank" rel="noopener noreferrer" class="github-icon-link" title="View on GitHub">
        <img src="./images/github-icon.svg" alt="GitHub" />
    </a>

    <script src="script.js" defer></script>

</body>
</html>
